###############################
# Spring Boot Test Profile
# In-memory DB + disabled security for integration tests
###############################

# --- DataSource (H2 in-memory) ---
spring.datasource.url=jdbc:h2:mem:videogames_test;MODE=MySQL;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# --- JPA/Hibernate ---
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.H2Dialect
spring.jpa.show-sql=false
spring.jpa.open-in-view=false
spring.jpa.defer-datasource-initialization=true

# --- SQL init / migrations ---
spring.sql.init.mode=never
spring.flyway.enabled=false
spring.liquibase.enabled=false

# --- Web/Thymeleaf ---
spring.thymeleaf.cache=false

# --- Logging (quieter) ---
logging.level.org.springframework=INFO

# --- Disable Security Autoconfig in tests ---
spring.autoconfigure.exclude=
  org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration,
  org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration,
  org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration

# --- Misc ---
spring.main.allow-bean-definition-overriding=true
